    <?php
    session_start();

    // Config faylini yuklash
    require_once 'config.php';

    // PDO ulanishini olish
    $pdo = getPdoConnection();
    initializeDatabase($pdo);
    createTables($pdo);

    // Foydalanuvchi tizimga kirganligini tekshirish
    if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
        header("Location: login.php");
        exit;
    }

    // Yangi statistika ma'lumotlarini olish
    try {
        // Jami faol xodimlar soni
        $stmt = $pdo->query("SELECT COUNT(*) as total FROM employees WHERE status = 'active'");
        $active_employees = $stmt->fetch(PDO::FETCH_ASSOC)['total'] ?? 0;
        
        // Jami arxivlangan xodimlar soni
        $stmt = $pdo->query("SELECT COUNT(*) as total FROM employees WHERE status = 'archived'");
        $archived_employees = $stmt->fetch(PDO::FETCH_ASSOC)['total'] ?? 0;
        
        // Jami saqlangan hujjatlar
        $stmt = $pdo->query("SELECT COUNT(*) as total FROM activities WHERE action LIKE '%hujjat%' OR action LIKE '%document%' OR action LIKE '%yuklandi%'");
        $total_documents = $stmt->fetch(PDO::FETCH_ASSOC)['total'] ?? 0;
        
        // Yangi qo'shilgan xodimlar (oxirgi 30 kun)
        $stmt = $pdo->query("SELECT COUNT(*) as total FROM employees WHERE hire_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY)");
        $new_employees = $stmt->fetch(PDO::FETCH_ASSOC)['total'] ?? 0;
        
        // Bo'limlar bo'yicha xodimlar statistikasi
        $dept_sql = "SELECT department, COUNT(*) as count FROM employees WHERE status = 'active' GROUP BY department ORDER BY count DESC LIMIT 5";
        $dept_stmt = $pdo->query($dept_sql);
        $department_stats = $dept_stmt->fetchAll(PDO::FETCH_ASSOC);
        
        // So'nggi faoliyatlar
        $activities_sql = "SELECT a.action, a.created_at, u.username, u.full_name 
                        FROM activities a 
                        LEFT JOIN users u ON a.user_id = u.id 
                        ORDER BY a.created_at DESC 
                        LIMIT 8";
        $activities_stmt = $pdo->query($activities_sql);
        $recent_activities = $activities_stmt->fetchAll(PDO::FETCH_ASSOC);
        
        // So'nggi qo'shilgan xodimlar
        $recent_employees_sql = "SELECT id, full_name, position, department, hire_date, phone, email 
                                FROM employees 
                                WHERE status = 'active'
                                ORDER BY hire_date DESC, id DESC 
                                LIMIT 6";
        $recent_employees_stmt = $pdo->query($recent_employees_sql);
        $recent_employees = $recent_employees_stmt->fetchAll(PDO::FETCH_ASSOC);
        
        // Tug'ilgan kunlar (keyingi 30 kun ichida)
        $birthday_sql = "SELECT full_name, position, birth_date 
                        FROM employees 
                        WHERE status = 'active' 
                        AND MONTH(birth_date) = MONTH(CURDATE() + INTERVAL 0 DAY)
                        AND DAY(birth_date) >= DAY(CURDATE())
                        ORDER BY DAY(birth_date) ASC
                        LIMIT 5";
        $birthday_stmt = $pdo->query($birthday_sql);
        $upcoming_birthdays = $birthday_stmt->fetchAll(PDO::FETCH_ASSOC);
        
    } catch (PDOException $e) {
        $error_message = "Ma'lumotlarni yuklashda xatolik: " . $e->getMessage();
    }

    // Sana formatlash funksiyasi
    function formatDate($date) {
        if (!$date) return 'Noma\'lum';
        $months = ['Yan', 'Fev', 'Mar', 'Apr', 'May', 'Iyun', 'Iyul', 'Avg', 'Sen', 'Okt', 'Noy', 'Dek'];
        $timestamp = strtotime($date);
        return date('d', $timestamp) . ' ' . $months[date('n', $timestamp) - 1] . ' ' . date('Y', $timestamp);
    }
    ?>


    <!DOCTYPE html>
    <html lang="uz">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HR Arxiv - Boshqaruv Paneli</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            :root {
                --primary: #6366f1;
                --primary-dark: #4f46e5;
                --secondary: #8b5cf6;
                --success: #10b981;
                --warning: #f59e0b;
                --danger: #ef4444;
                --info: #3b82f6;
                --dark: #1e293b;
                --light: #f1f5f9;
                --white: #ffffff;
                --gray-50: #f8fafc;
                --gray-100: #f1f5f9;
                --gray-200: #e2e8f0;
                --gray-300: #cbd5e1;
                --gray-600: #475569;
                --gray-700: #334155;
                --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
                --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: var(--dark);
            }

            .main-container {
                display: flex;
                min-height: 100vh;
            }

            /* Sidebar */
            .sidebar {
                width: 280px;
                background: var(--white);
                box-shadow: var(--shadow-xl);
                position: fixed;
                height: 100vh;
                overflow-y: auto;
                z-index: 1000;
                transition: transform 0.3s ease;
            }

            .sidebar-header {
                padding: 2rem 1.5rem;
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                color: white;
                text-align: center;
            }

            .sidebar-header i {
                font-size: 3rem;
                margin-bottom: 0.5rem;
                display: block;
            }

            .sidebar-header h2 {
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 0.25rem;
            }

            .sidebar-header p {
                font-size: 0.875rem;
                opacity: 0.9;
            }

            .sidebar-menu {
                padding: 1.5rem 0;
            }

            .menu-section {
                margin-bottom: 1.5rem;
            }

            .menu-section-title {
                padding: 0 1.5rem;
                font-size: 0.75rem;
                font-weight: 700;
                text-transform: uppercase;
                color: var(--gray-600);
                margin-bottom: 0.5rem;
                letter-spacing: 0.05em;
            }

            .menu-item {
                display: flex;
                align-items: center;
                padding: 0.875rem 1.5rem;
                color: var(--gray-700);
                text-decoration: none;
                transition: all 0.2s ease;
                position: relative;
            }

            .menu-item:hover {
                background: var(--gray-50);
                color: var(--primary);
            }

            .menu-item.active {
                background: linear-gradient(90deg, rgba(99, 102, 241, 0.1) 0%, transparent 100%);
                color: var(--primary);
                font-weight: 600;
            }

            .menu-item.active::before {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                bottom: 0;
                width: 4px;
                background: var(--primary);
            }

            .menu-item i {
                width: 24px;
                margin-right: 1rem;
                font-size: 1.125rem;
            }

            .user-profile {
                padding: 1.5rem;
                border-top: 1px solid var(--gray-200);
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .user-avatar {
                width: 48px;
                height: 48px;
                border-radius: 50%;
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: 700;
                font-size: 1.25rem;
            }

            .user-details h4 {
                font-size: 0.875rem;
                font-weight: 600;
                margin-bottom: 0.125rem;
            }

            .user-details p {
                font-size: 0.75rem;
                color: var(--gray-600);
            }

            /* Main Content */
            .main-content {
                margin-left: 280px;
                flex: 1;
                padding: 2rem;
            }

            .top-bar {
                background: var(--white);
                padding: 1.5rem 2rem;
                border-radius: 1rem;
                box-shadow: var(--shadow);
                margin-bottom: 2rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .welcome-text h1 {
                font-size: 2rem;
                font-weight: 700;
                color: var(--dark);
                margin-bottom: 0.25rem;
            }

            .welcome-text p {
                color: var(--gray-600);
                font-size: 0.875rem;
            }

            .top-actions {
                display: flex;
                gap: 1rem;
            }

            .btn {
                padding: 0.75rem 1.5rem;
                border-radius: 0.5rem;
                text-decoration: none;
                font-weight: 600;
                font-size: 0.875rem;
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                transition: all 0.2s ease;
                border: none;
                cursor: pointer;
            }

            .btn-primary {
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                color: white;
                box-shadow: var(--shadow);
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-lg);
            }

            .btn-outline {
                background: white;
                color: var(--primary);
                border: 2px solid var(--primary);
            }

            .btn-outline:hover {
                background: var(--primary);
                color: white;
            }

            /* Stats Grid */
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            .stat-card {
                background: var(--white);
                padding: 1.75rem;
                border-radius: 1rem;
                box-shadow: var(--shadow);
                position: relative;
                overflow: hidden;
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }

            .stat-card:hover {
                transform: translateY(-4px);
                box-shadow: var(--shadow-xl);
            }

            .stat-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg, var(--primary), var(--secondary));
            }

            .stat-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 1rem;
            }

            .stat-icon {
                width: 48px;
                height: 48px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
            }

            .stat-card:nth-child(1) .stat-icon {
                background: rgba(99, 102, 241, 0.1);
                color: var(--primary);
            }

            .stat-card:nth-child(2) .stat-icon {
                background: rgba(16, 185, 129, 0.1);
                color: var(--success);
            }

            .stat-card:nth-child(3) .stat-icon {
                background: rgba(245, 158, 11, 0.1);
                color: var(--warning);
            }

            .stat-card:nth-child(4) .stat-icon {
                background: rgba(59, 130, 246, 0.1);
                color: var(--info);
            }

            .stat-value {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--dark);
                line-height: 1;
                margin-bottom: 0.5rem;
            }

            .stat-label {
                font-size: 0.875rem;
                color: var(--gray-600);
                font-weight: 500;
            }

            .stat-trend {
                display: inline-flex;
                align-items: center;
                gap: 0.25rem;
                font-size: 0.75rem;
                font-weight: 600;
                color: var(--success);
                margin-top: 0.5rem;
            }

            /* Content Grid */
            .content-grid {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 2rem;
                margin-bottom: 2rem;
            }

            .card {
                background: var(--white);
                border-radius: 1rem;
                box-shadow: var(--shadow);
                overflow: hidden;
            }

            .card-header {
                padding: 1.5rem;
                border-bottom: 1px solid var(--gray-200);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .card-title {
                font-size: 1.125rem;
                font-weight: 700;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .card-title i {
                color: var(--primary);
            }

            .card-action {
                color: var(--primary);
                text-decoration: none;
                font-size: 0.875rem;
                font-weight: 600;
                transition: opacity 0.2s ease;
            }

            .card-action:hover {
                opacity: 0.7;
            }

            .card-body {
                padding: 1.5rem;
            }

            /* Activity List */
            .activity-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .activity-item {
                display: flex;
                gap: 1rem;
                padding: 1rem;
                border-radius: 0.5rem;
                transition: background 0.2s ease;
            }

            .activity-item:hover {
                background: var(--gray-50);
            }

            .activity-icon {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: rgba(99, 102, 241, 0.1);
                color: var(--primary);
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .activity-content {
                flex: 1;
            }

            .activity-user {
                font-weight: 600;
                color: var(--dark);
                margin-bottom: 0.125rem;
            }

            .activity-action {
                font-size: 0.875rem;
                color: var(--gray-600);
                margin-bottom: 0.25rem;
            }

            .activity-time {
                font-size: 0.75rem;
                color: var(--gray-600);
            }

            /* Employee Cards */
            .employee-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 1rem;
            }

            .employee-card {
                background: var(--gray-50);
                padding: 1.25rem;
                border-radius: 0.75rem;
                transition: all 0.2s ease;
                border: 1px solid var(--gray-200);
            }

            .employee-card:hover {
                background: white;
                box-shadow: var(--shadow);
                transform: translateY(-2px);
            }

            .employee-name {
                font-weight: 700;
                color: var(--dark);
                margin-bottom: 0.25rem;
                font-size: 1rem;
            }

            .employee-position {
                font-size: 0.875rem;
                color: var(--primary);
                margin-bottom: 0.5rem;
            }

            .employee-details {
                font-size: 0.75rem;
                color: var(--gray-600);
                display: flex;
                flex-direction: column;
                gap: 0.25rem;
            }

            /* Department Stats */
            .dept-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .dept-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                background: var(--gray-50);
                border-radius: 0.5rem;
            }

            .dept-name {
                font-weight: 600;
                color: var(--dark);
            }

            .dept-count {
                background: var(--primary);
                color: white;
                padding: 0.25rem 0.75rem;
                border-radius: 1rem;
                font-weight: 700;
                font-size: 0.875rem;
            }

            /* Birthday List */
            .birthday-list {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .birthday-item {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 0.875rem;
                background: var(--gray-50);
                border-radius: 0.5rem;
            }

            .birthday-icon {
                font-size: 1.5rem;
            }

            .birthday-info h4 {
                font-weight: 600;
                color: var(--dark);
                font-size: 0.875rem;
                margin-bottom: 0.125rem;
            }

            .birthday-info p {
                font-size: 0.75rem;
                color: var(--gray-600);
            }

            .no-data {
                text-align: center;
                padding: 3rem 1rem;
                color: var(--gray-600);
            }

            .no-data i {
                font-size: 3rem;
                margin-bottom: 1rem;
                opacity: 0.3;
            }

            /* Responsive */
            @media (max-width: 1200px) {
                .content-grid {
                    grid-template-columns: 1fr;
                }
            }

            @media (max-width: 768px) {
                .sidebar {
                    transform: translateX(-100%);
                }

                .main-content {
                    margin-left: 0;
                    padding: 1rem;
                }

                .stats-grid {
                    grid-template-columns: 1fr;
                }

                .top-bar {
                    flex-direction: column;
                    gap: 1rem;
                }

                .employee-grid {
                    grid-template-columns: 1fr;
                }
            }

            .error-alert {
                background: #fee;
                color: var(--danger);
                padding: 1rem;
                border-radius: 0.75rem;
                border-left: 4px solid var(--danger);
                margin-bottom: 2rem;
            }
        </style>
    </head>
    <body>
        <div class="main-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <i class="fas fa-folder-open"></i>
                    <h2>HR Arxiv</h2>
                    <p>Elektron Boshqaruv Tizimi</p>
                </div>

                <nav class="sidebar-menu">
                    <div class="menu-section">
                        <div class="menu-section-title">Asosiy</div>
                        <a href="index.php" class="menu-item active">
                            <i class="fas fa-home"></i>
                            <span>Bosh Sahifa</span>
                        </a>
                        <a href="dashboard.php" class="menu-item">
                            <i class="fas fa-chart-line"></i>
                            <span>Dashboard</span>
                        </a>
                    </div>

                    <div class="menu-section">
                        <div class="menu-section-title">Xodimlar</div>
                        <a href="employee_profiles.php" class="menu-item">
                            <i class="fas fa-users"></i>
                            <span>Xodimlar Ro'yxati</span>
                        </a>
                        <
                        <a href="contract_management.php" class="menu-item">
                            <i class="fas fa-file-contract"></i>
                            <span>Shartnomalar</span>
                        </a>
                    </div>

                    <div class="menu-section">
                        <div class="menu-section-title">Hujjatlar</div>
                        <a href="upload_document.php" class="menu-item">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>Hujjat Yuklash</span>
                        </a>
                        <a href="archive_search.php" class="menu-item">
                            <i class="fas fa-search"></i>
                            <span>Qidiruv</span>
                        </a>
                        <a href="document_reports.php" class="menu-item">
                            <i class="fas fa-file-alt"></i>
                            <span>Hisobotlar</span>
                        </a>
                    </div>

                    <div class="menu-section">
                        <div class="menu-section-title">Tizim</div>
                        <a href="system_settings.php" class="menu-item">
                            <i class="fas fa-cog"></i>
                            <span>Sozlamalar</span>
                        </a>
                        <a href="logout.php" class="menu-item">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Chiqish</span>
                        </a>
                    </div>
                </nav>

                <div class="user-profile">
                    <div class="user-avatar">
                        <?php echo strtoupper(substr($_SESSION['username'], 0, 1)); ?>
                    </div>
                    <div class="user-details">
                        <h4><?php echo htmlspecialchars($_SESSION['full_name'] ?? $_SESSION['username']); ?></h4>
                        <p>Administrator</p>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Top Bar -->
                <div class="top-bar">
                    <div class="welcome-text">
                        <h1>Xush kelibsiz! ðŸ‘‹</h1>
                        <p>Bugungi sana: <?php echo formatDate(date('Y-m-d')); ?></p>
                    </div>
                    <div class="top-actions">
                        <a href="add_employee.php" class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Yangi Xodim
                        </a>
                        <a href="upload_document.php" class="btn btn-outline">
                            <i class="fas fa-upload"></i>
                            Hujjat Yuklash
                        </a>
                    </div>
                </div>

                <?php if (isset($error_message)): ?>
                    <div class="error-alert">
                        <i class="fas fa-exclamation-triangle"></i> <?php echo htmlspecialchars($error_message); ?>
                    </div>
                <?php endif; ?>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                        <div class="stat-value"><?php echo $active_employees; ?></div>
                        <div class="stat-label">Faol Xodimlar</div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up"></i>
                            +<?php echo $new_employees; ?> yangi
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-archive"></i>
                            </div>
                        </div>
                        <div class="stat-value"><?php echo $archived_employees; ?></div>
                        <div class="stat-label">Arxivlangan</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                        </div>
                        <div class="stat-value"><?php echo $total_documents; ?></div>
                        <div class="stat-label">Jami Hujjatlar</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-building"></i>
                            </div>
                        </div>
                        <div class="stat-value"><?php echo count($department_stats); ?></div>
                        <div class="stat-label">Faol Bo'limlar</div>
                    </div>
                </div>

                <!-- Content Grid -->
                <div class="content-grid">
                    <!-- Recent Activities -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-clock"></i>
                                So'nggi Faoliyatlar
                            </h3>
                            <a href="activities.php" class="card-action">Barchasini ko'rish â†’</a>
                        </div>
                        <div class="card-body">
                            <?php if (!empty($recent_activities)): ?>
                                <div class="activity-list">
                                    <?php foreach ($recent_activities as $activity): ?>
                                        <div class="activity-item">
                                            <div class="activity-icon">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-user">
                                                    <?php echo htmlspecialchars($activity['full_name'] ?? $activity['username'] ?? 'Noma\'lum'); ?>
                                                </div>
                                                <div class="activity-action">
                                                    <?php echo htmlspecialchars($activity['action']); ?>
                                                </div>
                                                <div class="activity-time">
                                                    <i class="far fa-clock"></i>
                                                    <?php echo $activity['created_at'] ? date('d.m.Y H:i', strtotime($activity['created_at'])) : 'Noma\'lum'; ?>
                                                </div>
                                            </div>
                                        </div>
                                    <?php endforeach; ?>
                                </div>
                            <?php else: ?>
                                <div class="no-data">
                                    <i class="fas fa-inbox"></i>
                                    <p>Hozircha faoliyat yo'q</p>
                                </div>
                            <?php endif; ?>
                        </div>
                    </div>

                    <!-- Side Cards -->
                    <div>
                        <!-- Department Stats -->
                        <div class="card" style="margin-bottom: 2rem;">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <i class="fas fa-building"></i>
                                    Bo'limlar Statistikasi
                                </h3>
                            </div>
                            <div class="card-body">
                                <?php if (!empty($department_stats)): ?>
                                    <div class="dept-list">
                                        <?php foreach ($department_stats as $dept): ?>
                                            <div class="dept-item">
                                                <span class="dept-name"><?php echo htmlspecialchars($dept['department']); ?></span>
                                                <span class="dept-count"><?php echo $dept['count']; ?></span>
                                            </div>
                                        <?php endforeach; ?>
                                    </div>
                                <?php else: ?>
                                    <div class="no-data">
                                        <i class="fas fa-building"></i>
                                        <p>Bo'limlar ma'lumoti yo'q</p>
                                    </div>
                                <?php endif; ?>
                            </div>
                        </div>

                        <!-- Upcoming Birthdays -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <i class="fas fa-birthday-cake"></i>
                                    Yaqinlashayotgan Tug'ilgan Kunlar
                                </h3>
                            </div>
                            <div class="card-body">
                                <?php if (!empty($upcoming_birthdays)): ?>
                                    <div class="birthday-list">
                                        <?php foreach ($upcoming_birthdays as $birthday): ?>
                                            <div class="birthday-item">
                                                <span class="birthday-icon">ðŸŽ‚</span>
                                                <div class="birthday-info">
                                                    <h4><?php echo htmlspecialchars($birthday['full_name']); ?></h4>
                                                    <p><?php echo htmlspecialchars($birthday['position']); ?> â€¢ <?php echo date('d.m', strtotime($birthday['birth_date'])); ?></p>
                                                </div>
                                            </div>
                                        <?php endforeach; ?>
                                    </div>
                                <?php else: ?>
                                    <div class="no-data">
                                        <i class="fas fa-calendar"></i>
                                        <p>Yaqin kunlarda tug'ilgan kun yo'q</p>
                                    </div>
                                <?php endif; ?>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Employees -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-user-friends"></i>
                            So'nggi Qo'shilgan Xodimlar
                        </h3>
                        <a href="employee_profiles.php" class="card-action">Barchasini ko'rish â†’</a>
                    </div>
                    <div class="card-body">
                        <?php if (!empty($recent_employees)): ?>
                            <div class="employee-grid">
                                <?php foreach ($recent_employees as $employee): ?>
                                    <div class="employee-card">
                                        <div class="employee-name"><?php echo htmlspecialchars($employee['full_name']); ?></div>
                                        <div class="employee-position"><?php echo htmlspecialchars($employee['position']); ?></div>
                                        <div class="employee-details">
                                            <span><i class="fas fa-building"></i> <?php echo htmlspecialchars($employee['department']); ?></span>
                                            <span><i class="fas fa-calendar"></i> <?php echo formatDate($employee['hire_date']); ?></span>
                                            <?php if ($employee['phone']): ?>
                                                <span><i class="fas fa-phone"></i> <?php echo htmlspecialchars($employee['phone']); ?></span>
                                            <?php endif; ?>
                                        </div>
                                    </div>
                                <?php endforeach; ?>
                            </div>
                        <?php else: ?>
                            <div class="no-data">
                                <i class="fas fa-users"></i>
                                <p>Xodimlar ma'lumoti yo'q</p>
                            </div>
                        <?php endif; ?>
                    </div>
                </div>
            </main>
        </div>
    </body>
    </html>
